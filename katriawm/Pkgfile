# Description: A non-reparenting, dynamic window manager with decorations. (git checkout)
# URL:         https://www.uninformativ.de/projects/katriawm/
# Maintainer:  6c37 Team, https://github.com/6c37/crux-ports-git/issues
# Depends on:  git xorg-libx11 xorg-libxft xorg-libxrandr

name=katriawm
version=git
release=1
source=(
	barinfo_config.h
	core_config.h
	theme/*
)

build() {
	cd $PKGMK_SOURCE_DIR

	if cd $name; then
		git fetch -q; git reset --hard origin/master
	else
		git clone git://github.com/vain/katriawm $name
		cd $name
	fi

	cd src

	cp $SRC/barinfo_config.h barinfo/config.h
	cp $SRC/core_config.h core/config.h
	mkdir -p ../themes/theme
	cp $SRC/{colorsfonts.h,decorations.ppm,layout.h,metadata} ../themes/theme
	../themes/make_theme_h.sh ../themes/theme > core/theme.h

	make
	make DESTDIR=$PKG prefix=/usr install
}
